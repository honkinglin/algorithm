# 1268. æœç´¢æ¨èç³»ç»Ÿ <Badge type="warning" text="Medium" />

ç»™ä½ ä¸€ä¸ªäº§å“æ•°ç»„ `products` å’Œä¸€ä¸ªå­—ç¬¦ä¸² `searchWord` `ï¼Œproducts`  æ•°ç»„ä¸­æ¯ä¸ªäº§å“éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

è¯·ä½ è®¾è®¡ä¸€ä¸ªæ¨èç³»ç»Ÿï¼Œåœ¨ä¾æ¬¡è¾“å…¥å•è¯ `searchWord` çš„æ¯ä¸€ä¸ªå­—æ¯åï¼Œæ¨è `products` æ•°ç»„ä¸­å‰ç¼€ä¸ `searchWord` ç›¸åŒçš„æœ€å¤šä¸‰ä¸ªäº§å“ã€‚å¦‚æœå‰ç¼€ç›¸åŒçš„å¯æ¨èäº§å“è¶…è¿‡ä¸‰ä¸ªï¼Œè¯·æŒ‰å­—å…¸åºè¿”å›æœ€å°çš„ä¸‰ä¸ªã€‚

è¯·ä½ ä»¥äºŒç»´åˆ—è¡¨çš„å½¢å¼ï¼Œè¿”å›åœ¨è¾“å…¥ `searchWord` æ¯ä¸ªå­—æ¯åç›¸åº”çš„æ¨èäº§å“çš„åˆ—è¡¨ã€‚

>ç¤ºä¾‹ 1ï¼š  
è¾“å…¥ï¼šproducts = ["mobile","mouse","moneypot","monitor","mousepad"], searchWord = "mouse"   
è¾“å‡ºï¼š[   
    ["mobile","moneypot","monitor"],   
    ["mobile","moneypot","monitor"],   
    ["mouse","mousepad"],   
    ["mouse","mousepad"],   
    ["mouse","mousepad"]   
]   
è§£é‡Šï¼šæŒ‰å­—å…¸åºæ’åºåçš„äº§å“åˆ—è¡¨æ˜¯ ["mobile","moneypot","monitor","mouse","mousepad"]   
è¾“å…¥ m å’Œ moï¼Œç”±äºæ‰€æœ‰äº§å“çš„å‰ç¼€éƒ½ç›¸åŒï¼Œæ‰€ä»¥ç³»ç»Ÿè¿”å›å­—å…¸åºæœ€å°çš„ä¸‰ä¸ªäº§å“ ["mobile","moneypot","monitor"]   
è¾“å…¥ mouï¼Œ mous å’Œ mouse åç³»ç»Ÿéƒ½è¿”å› ["mouse","mousepad"] 

>ç¤ºä¾‹ 2ï¼š  
è¾“å…¥ï¼šproducts = ["havana"], searchWord = "havana"   
è¾“å‡ºï¼š[["havana"],["havana"],["havana"],["havana"],["havana"],["havana"]] 

>ç¤ºä¾‹ 3ï¼š  
è¾“å…¥ï¼šproducts = ["bags","baggage","banner","box","cloths"], searchWord = "bags"   
è¾“å‡ºï¼š[["baggage","bags","banner"],["baggage","bags","banner"],["baggage","bags"],["bags"]]

>ç¤ºä¾‹ 4ï¼š  
è¾“å…¥ï¼šproducts = ["havana"], searchWord = "tatiana"    
è¾“å‡ºï¼š[[],[],[],[],[],[],[]]

## è§£é¢˜æ€è·¯

**è¾“å…¥**ï¼šä¸€ä¸ªäº§å“æ•°ç»„ `products` å’Œä¸€ä¸ªå­—ç¬¦ä¸² `searchWord`

**è¾“å‡º**ï¼šè®¾è®¡ä¸€ä¸ªæ¨èç³»ç»Ÿï¼Œåœ¨ä¾æ¬¡è¾“å…¥å•è¯ `searchWord` çš„æ¯ä¸€ä¸ªå­—æ¯åï¼Œæ¨è `products` æ•°ç»„ä¸­å‰ç¼€ä¸ `searchWord` ç›¸åŒçš„æœ€å¤šä¸‰ä¸ªäº§å“

æœ¬é¢˜å±äº **å‰ç¼€æ ‘ Trie** é—®é¢˜ã€‚

### è§£æ³• 1ï¼šæ’åº + éå†ï¼ˆæš´åŠ›æ³•ï¼‰

1. å…ˆå¯¹ `products` æ’åºã€‚
2. æ¯æ¬¡å–å‰ç¼€ `prefix`ï¼Œéå†æ‰€æœ‰äº§å“ï¼Œæ‰¾å‡ºå‰ 3 ä¸ª `startsWith(prefix)` çš„å•è¯ã€‚
3. æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼š`O(m * n)`ï¼ˆm = searchWord.length, n = äº§å“æ•°ï¼‰ã€‚
   ğŸ‘‰ å®ç°ç®€å•ï¼Œä½†æ•ˆç‡ä¸é«˜ã€‚

### è§£æ³• 2ï¼šæ’åº + äºŒåˆ†æŸ¥æ‰¾ï¼ˆæ¨è âœ…ï¼‰

1. å¯¹ `products` æ’åºã€‚
2. æ¯æ¬¡å–å‰ç¼€ `prefix`ï¼Œç”¨ **äºŒåˆ†æŸ¥æ‰¾** æ‰¾åˆ°ç¬¬ä¸€ä¸ª `>= prefix` çš„ä½ç½®ã€‚
3. ä»è¯¥ä½ç½®å‘åå–æœ€å¤š 3 ä¸ªå•è¯ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…å‰ç¼€ã€‚
4. æ—¶é—´å¤æ‚åº¦ï¼š`O(n log n + m log n)`ï¼Œæ•ˆç‡æ¯”æš´åŠ›å¥½å¾ˆå¤šã€‚
   ğŸ‘‰ **ä»£ç å®ç°ç®€æ´ï¼Œæ€§èƒ½å¥½ï¼Œé¢è¯•å‹å¥½ã€‚**

### è§£æ³• 3ï¼šTrie å‰ç¼€æ ‘ï¼ˆé€‚åˆé«˜é¢‘æŸ¥è¯¢ï¼‰

1. æ„å»º Trieï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨è¯¥å‰ç¼€ä¸‹æœ€å¤š 3 ä¸ªå­—å…¸åºæœ€å°çš„äº§å“ã€‚
2. æ’å…¥æ—¶ï¼Œå› ä¸º `products` å·²ç»æ’è¿‡åºï¼Œæ‰€ä»¥æ’å…¥è¿‡ç¨‹ä¸­åªéœ€è¦ä¿ç•™å‰ 3 ä¸ªå€™é€‰ã€‚
3. æŸ¥è¯¢æ—¶ï¼Œæ²¿ç€ `searchWord` é€ä¸ªå­—ç¬¦éå† Trieï¼Œå–å‡ºå¯¹åº”èŠ‚ç‚¹çš„ `suggestions`ã€‚
4. æ—¶é—´å¤æ‚åº¦ï¼š
   * æ„å»º Trieï¼š`O(n * L)`ï¼ˆn = äº§å“æ•°ï¼ŒL = å•è¯é•¿åº¦ï¼‰
   * æŸ¥è¯¢ï¼š`O(m)`ï¼ˆm = searchWord.lengthï¼‰
     ğŸ‘‰ æ›´å **ç®—æ³•é¢˜é£æ ¼**ï¼Œé€‚åˆå¤§é‡æŸ¥è¯¢åœºæ™¯ã€‚

## ğŸ”¹ æ€»ç»“
* **æš´åŠ›æ³•**ï¼šå®ç°æœ€ç®€å•ï¼Œæ•ˆç‡ä½ã€‚
* **äºŒåˆ†æŸ¥æ‰¾æ³•**ï¼šä»£ç ç®€æ´ï¼Œæ•ˆç‡é«˜ï¼Œé¢è¯•ä¸­å¸¸ç”¨ã€‚
* **Trie æ³•**ï¼šé€‚åˆç®—æ³•é¢˜å’Œé«˜é¢‘æŸ¥è¯¢ï¼Œç©ºé—´æ¢æ—¶é—´ã€‚

## ä»£ç å®ç°

::: code-group

```python
class TrieNode:
    def __init__(self):
        # å­èŠ‚ç‚¹ï¼škey = å­—ç¬¦, value = TrieNode
        self.children = {}
        # å½“å‰å‰ç¼€ä¸‹çš„æ¨èè¯ï¼ˆæœ€å¤š 3 ä¸ªï¼‰
        self.suggestions = []

class Trie:
    def __init__(self):
        self.root = TrieNode()
    
    def insert(self, word: str) -> None:
        """å‘ Trie ä¸­æ’å…¥ä¸€ä¸ªå•è¯"""
        node = self.root
        for ch in word:
            # å¦‚æœæ²¡æœ‰è¯¥å­—ç¬¦ï¼Œåˆ›å»ºä¸€ä¸ªå­èŠ‚ç‚¹
            if ch not in node.children:
                node.children[ch] = TrieNode()
            node = node.children[ch]

            # åœ¨å½“å‰èŠ‚ç‚¹ç»´æŠ¤æ¨èåˆ—è¡¨ï¼ˆåªä¿ç•™å‰ 3 ä¸ªï¼Œå·²æ’åºï¼‰
            if len(node.suggestions) < 3:
                node.suggestions.append(word)
    
    def getSuggestions(self, prefix: str) -> List[List[str]]:
        """æ ¹æ®æœç´¢å‰ç¼€è¿”å›æ¨èç»“æœ"""
        node = self.root
        res = []
        for ch in prefix:
            if node and ch in node.children:
                node = node.children[ch]
                res.append(node.suggestions)
            else:
                # å¦‚æœæŸä¸ªå‰ç¼€ä¸å­˜åœ¨ï¼Œåç»­æ‰€æœ‰å‰ç¼€éƒ½è¿”å› []
                node = None
                res.append([])
        return res


class Solution:
    def suggestedProducts(self, products: List[str], searchWord: str) -> List[List[str]]:
        # å…ˆæ’åºï¼Œä¿è¯å­—å…¸åºæœ€å°çš„å…ˆæ’å…¥ Trie
        products.sort()

        trie = Trie()
        # æ’å…¥æ‰€æœ‰äº§å“
        for p in products:
            trie.insert(p)

        # æŸ¥è¯¢æ¨èç»“æœ
        return trie.getSuggestions(searchWord)
```

```javascript
class TrieNode {
    constructor() {
        this.children = new Map();  // å­èŠ‚ç‚¹
        this.suggestions = [];      // æ¨èçš„å•è¯ï¼ˆæœ€å¤š 3 ä¸ªï¼‰
    }
}

class Trie {
    constructor() {
        this.root = new TrieNode();
    }

    // æ’å…¥å•è¯
    insert(word) {
        let node = this.root;
        for (let ch of word) {
            if (!node.children.has(ch)) {
                node.children.set(ch, new TrieNode());
            }
            node = node.children.get(ch);

            // åœ¨å½“å‰èŠ‚ç‚¹ç»´æŠ¤æ¨èåˆ—è¡¨ï¼ˆæœ€å¤š 3 ä¸ªï¼‰
            if (node.suggestions.length < 3) {
                node.suggestions.push(word);
            }
        }
    }

    // æŸ¥è¯¢å‰ç¼€æ¨èç»“æœ
    getSuggestions(prefix) {
        let node = this.root;
        const res = [];

        for (let ch of prefix) {
            if (node && node.children.has(ch)) {
                node = node.children.get(ch);
                res.push(node.suggestions);
            } else {
                // å‰ç¼€ä¸å­˜åœ¨ï¼Œåé¢éƒ½åªèƒ½è¿”å› []
                node = null;
                res.push([]);
            }
        }

        return res;
    }
}

var suggestedProducts = function(products, searchWord) {
    // å…ˆæ’åºï¼Œä¿è¯æ’å…¥ Trie æ—¶å­—å…¸åºæ­£ç¡®
    products.sort();

    // æ„å»º Trie
    const trie = new Trie();
    for (let word of products) {
        trie.insert(word);
    }

    // æŸ¥è¯¢å‰ç¼€å»ºè®®
    return trie.getSuggestions(searchWord);
};
```

:::

## å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼šO(n * L)

ç©ºé—´å¤æ‚åº¦ï¼šO(m) 

## é“¾æ¥

[1268 å›½é™…ç‰ˆ](https://leetcode.com/problems/search-suggestions-system/description/)

[1268 ä¸­æ–‡ç‰ˆ](https://leetcode.cn/problems/search-suggestions-system/description/)
